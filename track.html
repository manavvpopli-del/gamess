<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>REAL TIME TRACKER • 2026</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/libphonenumber-js@1.11.9/bundle/libphonenumber-js.min.js"></script>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Courier New', monospace;
      background: #000;
      color: #0f0;
      min-height: 100vh;
      overflow-x: hidden;
    }
    header {
      background: rgba(0,20,0,0.8);
      padding: 1rem;
      text-align: center;
      border-bottom: 2px solid #0f0;
      box-shadow: 0 0 20px #0f0;
    }
    h1 {
      font-size: 2rem;
      text-shadow: 0 0 10px #0f0;
      letter-spacing: 3px;
    }
    .container {
      max-width: 900px;
      margin: 1.5rem auto;
      padding: 1rem;
    }
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    input {
      padding: 1.2rem;
      font-size: 1.3rem;
      background: #001100;
      border: 2px solid #0f0;
      color: #0f0;
      font-family: 'Courier New', monospace;
      border-radius: 0;
      box-shadow: inset 0 0 10px #0f0;
    }
    button {
      padding: 1.2rem;
      font-size: 1.3rem;
      font-weight: bold;
      background: #0f0;
      color: #000;
      border: none;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 0 15px #0f0;
      transition: all 0.3s;
    }
    button:hover {
      background: #00ff00;
      box-shadow: 0 0 30px #0f0;
    }
    #status {
      text-align: center;
      font-size: 1.4rem;
      margin: 2rem 0;
      min-height: 3em;
      text-shadow: 0 0 8px #0f0;
      opacity: 0;
      transition: opacity 0.6s;
    }
    #status.visible { opacity: 1; }
    .blink { animation: blink 1.2s infinite; }
    @keyframes blink { 50% { opacity: 0.4; } }
    #result {
      background: rgba(0,10,0,0.7);
      border: 1px solid #0f0;
      border-radius: 0;
      padding: 1.5rem;
      display: none;
      box-shadow: 0 0 25px #0f0;
    }
    #info {
      margin-bottom: 1.5rem;
      line-height: 1.8;
      font-size: 1.2rem;
    }
    #info strong { color: #0f0; text-shadow: 0 0 5px #0f0; }
    #map-wrapper {
      position: relative;
      height: 500px;
      border: 2px solid #0f0;
      box-shadow: 0 0 20px #0f0;
      overflow: hidden;
    }
    #map { height: 100%; }
    .radar-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 1000;
    }
    .radar-sweep {
      position: absolute;
      width: 300%;
      height: 300%;
      top: -100%;
      left: -100%;
      background: conic-gradient(
        from 0deg at 50% 50%,
        transparent 0deg,
        rgba(0,255,0,0.4) 30deg,
        rgba(0,255,0,0.15) 60deg,
        transparent 120deg
      );
      transform-origin: 50% 50%;
      animation: sweep 4s linear infinite;
      opacity: 0.7;
    }
    @keyframes sweep {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }
    .pulse-ring {
      position: absolute;
      top: 50%; left: 50%;
      width: 0; height: 0;
      border: 3px solid #0f0;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: ring-pulse 3s infinite ease-out;
      opacity: 0;
    }
    .pulse-ring:nth-child(2) { animation-delay: 1s; }
    .pulse-ring:nth-child(3) { animation-delay: 2s; }
    @keyframes ring-pulse {
      0%   { width:0; height:0; opacity:0.8; }
      100% { width:400px; height:400px; opacity:0; }
    }
  </style>
</head>
<body>

<header>
  <h1>SIGNAL TAPICI V.K</h1>
</header>

<div class="container">
  <div class="input-group">
    <input type="tel" id="phone" placeholder="+994501234567" autofocus />
    <button onclick="initiateTrack()">ATTACK SİGNAL</button>
  </div>

  <div id="status"></div>

  <div id="result">
    <div id="info"></div>
    <div id="map-wrapper">
      <div id="map"></div>
      <div class="radar-overlay">
        <div class="radar-sweep"></div>
        <div class="pulse-ring"></div>
        <div class="pulse-ring"></div>
        <div class="pulse-ring"></div>
      </div>
    </div>
  </div>

  <div style="text-align:center; margin-top:2rem; color:#555; font-size:0.9rem;">
    SIMULATION MODE • REAL GPS REQUIRES DEVICE ACCESS / LEGAL AUTH
  </div>
</div>

<script>
// Ölkə koordinatları (realistiklik üçün)
const targets = {
  "AZ": { lat: 40.4093, lng: 49.8671, zoom: 13, loc: "BAKU SECTOR" },
  "TR": { lat: 41.0082, lng: 28.9784, zoom: 12, loc: "ISTANBUL GRID" },
  "RU": { lat: 55.7558, lng: 37.6173, zoom: 12, loc: "MOSCOW ZONE" },
  "GE": { lat: 41.6938, lng: 44.8015, zoom: 13, loc: "TBILISI AREA" },
  "UNKNOWN": { lat: 0, lng: 0, zoom: 3, loc: "SIGNAL LOST" }
};

let map = null;

function initiateTrack() {
  const input = document.getElementById("phone").value.trim();
  const status = document.getElementById("status");
  const result = document.getElementById("result");
  const info = document.getElementById("info");

  if (!input.startsWith("+")) {
    status.innerHTML = "INVALID FORMAT → USE INTERNATIONAL PREFIX";
    status.style.color = "#f00";
    status.classList.add("visible", "blink");
    return;
  }

  status.innerHTML = "PINGING NETWORK...";
  status.style.color = "#0f0";
  status.classList.add("visible");

  // Saxta mərhələlər (daha uzun və realistik)
  const steps = [
    { delay: 1500, text: "CONNECTING TO MSC..." },
    { delay: 2800, text: "QUERYING HLR / VLR..." },
    { delay: 4200, text: "TRIANGULATION IN PROGRESS..." },
    { delay: 5800, text: "SIGNAL LOCKED → COORDINATES ACQUIRED" }
  ];

  let stepIndex = 0;

  const interval = setInterval(() => {
    if (stepIndex < steps.length) {
      status.innerHTML = steps[stepIndex].text;
      stepIndex++;
    } else {
      clearInterval(interval);
      processResult(input, status, result, info);
    }
  }, 1000); // hər addım ~1 saniyə əlavə gecikmə
}

function processResult(input, status, result, info) {
  try {
    const num = libphonenumber.parsePhoneNumber(input);

    if (!num?.isValid()) throw new Error();

    const cc = num.country || "UNKNOWN";
    const place = targets[cc] || targets.UNKNOWN;

    status.innerHTML = "TARGET LOCATED • LIVE FEED ACTIVE";
    status.style.color = "#0f0";

    info.innerHTML = `
<strong>COUNTRY CODE:</strong> \( {num.country || "??"} (+ \){num.countryCallingCode})<br>
<strong>CARRIER:</strong> ${num.carrier || "UNKNOWN OPERATOR"}<br>
<strong>TYPE:</strong> ${num.getType() || "MOBILE / FIXED"}<br>
<strong>APPROX LOCATION:</strong> ${place.loc}<br>
<strong>ACCURACY:</strong> CELL TOWER TRIANGULATION (± 500-2000m)
    `;

    result.style.display = "block";

    if (map) map.remove();

    map = L.map('map', {
      zoomControl: true,
      attributionControl: false
    }).setView([place.lat, place.lng], place.zoom);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
    }).addTo(map);

    // Sadə marker + radar effekti artıq overlay-dədir
    L.circleMarker([place.lat, place.lng], {
      radius: 8,
      fillColor: "#0f0",
      color: "#0f0",
      weight: 3,
      opacity: 1,
      fillOpacity: 0.8
    }).addTo(map).bindPopup("TARGET").openPopup();

  } catch (e) {
    status.innerHTML = "ACQUISITION FAILED • INVALID / PROTECTED SIGNAL";
    status.style.color = "#f00";
    status.classList.add("blink");
  }
}
</script>

</body>
</html>