<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sevgilini NÉ™ QÉ™dÉ™r TanÄ±yÄ±rsan?</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      color: #f0e0ff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      overflow-x: hidden;
    }
    #bg-video {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: -2;
    }
    #overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      z-index: -1;
    }
    h1 { 
      font-size: clamp(2.2rem, 7vw, 3.5rem); 
      margin: 4vh 0 3vh; 
      color: #ff66cc; 
      text-shadow: 0 0 15px #ff66cc80; 
      z-index: 1;
    }
    #status {
      font-size: clamp(1.4rem, 5vw, 2rem);
      margin: 3vh 0 5vh;
      color: #ffcc66;
      text-align: center;
      max-width: 90%;
      z-index: 1;
    }
    #lobby { 
      text-align: center; 
      width: 100%; 
      max-width: 520px; 
      z-index: 1; 
    }
    input, button {
      font-size: 1.4rem;
      padding: 1rem 2rem;
      margin: 1.2rem 0.6rem;
      border: none;
      border-radius: 14px;
      width: 100%;
      max-width: 400px;
    }
    button {
      background: #ff33cc;
      color: white;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover { background: #ff1ab3; transform: translateY(-4px); }
    #copyBtn { background: #00cc88; }
    #copyBtn:hover { background: #00ffaa; }

    #game {
      display: none;
      width: 100%;
      max-width: 1100px;
      flex-direction: column;
      align-items: center;
      padding: 3vh 0;
      z-index: 1;
      position: relative;
    }
    #start-btn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3.5rem;
      padding: 1.8rem 5rem;
      background: #00cc88;
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 15px 40px rgba(0,204,136,0.6);
      transition: all 0.4s;
      z-index: 10;
    }
    #start-btn:hover {
      background: #00ffaa;
      transform: translate(-50%, -50%) scale(1.1);
    }
    #timer, #qEmoji, #question, .options {
      opacity: 0;
      transition: opacity 0.6s ease;
    }
    #end {
      display: none;
      width: 100%;
      max-width: 1000px;
      flex-direction: column;
      align-items: center;
      padding: 5vh 0;
      z-index: 1;
    }
    #end h2 { font-size: clamp(3rem, 8vw, 4.2rem); color: #ffdd44; margin-bottom: 4vh; }
    #result { font-size: clamp(1.8rem, 5.5vw, 2.4rem); text-align: center; margin-bottom: 5vh; }
    #answersList {
      width: 100%;
      background: rgba(40,0,70,0.75);
      border-radius: 18px;
      padding: 4vh;
      font-size: clamp(1.2rem, 4vw, 1.5rem);
      line-height: 1.8;
      margin-bottom: 5vh;
    }
    #answersList div { margin: 2.5vh 0; padding: 2.5vh; background: rgba(60,0,100,0.65); border-radius: 14px; }
    button#downloadPdf, button#restartBtn {
      font-size: 1.5rem;
      padding: 1.2rem 3rem;
      margin: 2vh;
    }
    #downloadPdf { background: #3366ff; }
    #downloadPdf:hover { background: #5588ff; }
    #waiting { font-size: 1.5rem; color: #ffcc66; margin-top: 3vh; text-align: center; }
  </style>
</head>
<body>

  <video id="bg-video" autoplay loop playsinline muted>
    <source src="videoo.mp4" type="video/mp4">
    Brauzeriniz video dÉ™stÉ™klÉ™mir.
  </video>
  <div id="overlay"></div>

  <h1>Sevgilini NÉ™ QÉ™dÉ™r TanÄ±yÄ±rsan?</h1>
  <div id="status">HazÄ±rlanÄ±r...</div>

  <div id="lobby">
    <button onclick="createHost()">Host ol (ID yarat)</button>
    <input id="peerIdInput" placeholder="Dostunun ID-sini yaz" />
    <button onclick="joinGame()">QoÅŸul</button>
  </div>

  <div id="game">
    <button id="start-btn">Davam et</button>
    <div id="timer">15</div>
    <div id="qEmoji"></div>
    <div id="question"></div>
    <div class="options" id="options"></div>
  </div>

  <div id="end">
    <h2>Oyun Bitdi!</h2>
    <div id="result">30 sual cavablandÄ±!</div>
    <div id="answersList"></div>
    <button id="downloadPdf">PDF olaraq yÃ¼klÉ™</button>
    <button id="restartBtn" onclick="requestRestart()">YenidÉ™n BaÅŸlat</button>
    <div id="waiting"></div>
  </div>

  <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    const { jsPDF } = window.jspdf;

    const status = document.getElementById('status');
    const lobby = document.getElementById('lobby');
    const gameDiv = document.getElementById('game');
    const startBtn = document.getElementById('start-btn');
    const timerEl = document.getElementById('timer');
    const qEmoji = document.getElementById('qEmoji');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const endDiv = document.getElementById('end');
    const resultEl = document.getElementById('result');
    const answersList = document.getElementById('answersList');
    const waitingEl = document.getElementById('waiting');
    const video = document.getElementById('bg-video');

    let peer = null;
    let conn = null;
    let myRole = null;
    let myId = '';
    let currentQuestionIndex = -1;
    let timerInterval = null;
    let timeLeft = 15;
    let myAnswered = false;
    let opponentAnswered = false;
    let myAnswers = new Array(30).fill(-1);
    let restartRequested = false;
    let opponentRestartRequested = false;

    const questions = [
      { q: "Sevgilinin É™n sevdiyi rÉ™ng hansÄ±dÄ±r?", options: ["QÄ±rmÄ±zÄ±", "Mavi", "YaÅŸÄ±l", "SarÄ±", "BÉ™nÃ¶vÅŸÉ™yi", "Qara"], emoji: "ðŸŽ¨" },
      { q: "UÅŸaqlÄ±qda É™n Ã§ox sevdiyi oyuncaq nÉ™ idi?", options: ["AyÄ± balasÄ±", "MaÅŸÄ±n", "Kukla", "Lego", "Top", "Robot"], emoji: "ðŸ§¸" },
      { q: "Æn sevdiyi yemÉ™k hansÄ±dÄ±r?", options: ["Plov", "Pizza", "Dolma", "LavaÅŸ", "Kabab", "Sushi"], emoji: "ðŸ²" },
      { q: "SÉ™hÉ™r tezdÉ™n ilk nÉ™ edir?", options: ["Telefonuna baxÄ±r", "Kofe/Ã§ay iÃ§ir", "Ä°dman edir", "YenidÉ™n yatÄ±r", "DuÅŸ alÄ±r", "Kitab oxuyur"], emoji: "â˜•" },
      { q: "Æn Ã§ox sevdiyi musiqi janrÄ± hansÄ±dÄ±r?", options: ["Pop", "Rap", "Rock", "Klassik", "Xalq", "Elektronika"], emoji: "ðŸŽµ" },
      { q: "UÅŸaqlÄ±q lÉ™qÉ™bi nÉ™ olub?", options: ["Balaca", "Åžirin", "TÃ¼lkÃ¼", "ÅžiÅŸko", "Yaramaz", "HeÃ§ lÉ™qÉ™bi olmayÄ±b"], emoji: "ðŸ˜„" },
      { q: "Æn bÃ¶yÃ¼k qorxusu nÉ™dir?", options: ["HÃ¼ndÃ¼rlÃ¼k", "QaranlÄ±q", "HÃ¶rÃ¼mÃ§É™k", "TÉ™k qalmaq", "Ä°ynÉ™", "DÉ™niz"], emoji: "ðŸ˜±" },
      { q: "Æn sevdiyi film janrÄ± hansÄ±dÄ±r?", options: ["Komediya", "Romantika", "Dram", "Aksiya", "Fantastika", "DÉ™hÅŸÉ™t"], emoji: "ðŸŽ¬" },
      { q: "Æn Ã§ox sevdiyi mÃ¶vsÃ¼m hansÄ±dÄ±r?", options: ["Yay", "PayÄ±z", "QÄ±ÅŸ", "Yaz"], emoji: "ðŸ‚" },
      { q: "Telefonunun arxa fonunda nÉ™ var?", options: ["Selfi", "MÉ™nzÉ™rÉ™", "Heyvan", "Qara ekran", "Musiqi qrupu", "SÉ™n"], emoji: "ðŸ“±" },
      { q: "Æn sevdiyi heyvan hansÄ±dÄ±r?", options: ["PiÅŸik", "Ä°t", "QuÅŸ", "At", "Panda", "Delfin"], emoji: "ðŸ±" },
      { q: "Æn Ã§ox sevdiyi iÃ§ki nÉ™dir?", options: ["Kola", "Ã‡ay", "Kofe", "ÅžirÉ™", "Su", "Limonad"], emoji: "ðŸ¥¤" },
      { q: "UÅŸaqlÄ±qda hansÄ± idman nÃ¶vÃ¼ ilÉ™ mÉ™ÅŸÄŸul olub?", options: ["Futbol", "ÃœzgÃ¼Ã§Ã¼lÃ¼k", "RÉ™qs", "Voleybol", "GÃ¼lÉ™ÅŸ", "HeÃ§ biri"], emoji: "âš½" },
      { q: "Æn sevdiyi tÉ™til yeri haradÄ±r?", options: ["DÉ™niz", "DaÄŸ", "ÅžÉ™hÉ™r", "KÉ™nd", "XaricdÉ™", "EvindÉ™"], emoji: "ðŸ–ï¸" },
      { q: "Æn bÃ¶yÃ¼k xÉ™yalÄ± nÉ™dir?", options: ["SÉ™yahÉ™t", "ZÉ™nginlik", "AilÉ™ qurmaq", "ÅžÃ¶hrÉ™t", "Ã–z biznesini qurmaq", "Sakit hÉ™yat"], emoji: "ðŸŒŸ" },
      { q: "Æn pis vÉ™rdiÅŸi nÉ™dir?", options: ["Gec yatmaq", "Ã‡ox telefon istifadÉ™si", "UnutqanlÄ±q", "DÄ±rnaq yemÉ™k", "GecikmÉ™k", "Ã‡ox danÄ±ÅŸmamaq"], emoji: "ðŸ˜…" },
      { q: "Æn Ã§ox sevdiyi emoji hansÄ±dÄ±r?", options: ["ðŸ˜‚", "â¤ï¸", "ðŸ”¥", "ðŸ˜ˆ", "ðŸ¥°", "ðŸ¤¦â€â™€ï¸"], emoji: "ðŸ˜" },
      { q: "SÉ™hÉ™r yuxudan oyananda ilk nÉ™ dÃ¼ÅŸÃ¼nÃ¼r?", options: ["Kofe", "Telefon", "YemÉ™k", "YenidÉ™n yatmaq", "Ä°ÅŸ", "SÉ™yahÉ™t"], emoji: "ðŸ›Œ" },
      { q: "Æn sevdiyi zarafat nÃ¶vÃ¼ hansÄ±dÄ±r?", options: ["Qara yumor", "Sarkazm", "Klassik", "Zarafat sevmir", "DadlÄ± zarafatlar", "PÉ™dÉ™rÅŸÉ™killi"], emoji: "ðŸ¤¡" },
      { q: "Onun ideal hÉ™ftÉ™sonu necÉ™ keÃ§ir?", options: ["Evde film izlÉ™mÉ™k", "Ã‡Ã¶lÉ™ Ã§Ä±xmaq", "Yuxu Ã§É™kmÉ™k", "Dostlarla gÃ¶rÃ¼ÅŸ", "AlÄ±ÅŸ-veriÅŸ", "TÉ™biÉ™tdÉ™ gÉ™zmÉ™k"], emoji: "ðŸ›‹ï¸" },
      { q: "Æn sevdiyi kitab janrÄ± hansÄ±dÄ±r?", options: ["Roman", "Detektiv", "Fantastika", "Psixologiya", "HeÃ§ oxumur", "Åžeir"], emoji: "ðŸ“š" },
      { q: "UÅŸaqlÄ±qda É™n sevdiyi cizgi filmi hansÄ± idi?", options: ["Åžrek", "Aslan Kral", "Donanma", "Tom vÉ™ Cerri", "SpongeBob", "DigÉ™r"], emoji: "ðŸ“º" },
      { q: "Æn Ã§ox sevdiyi qoxu hansÄ±dÄ±r?", options: ["Ætir", "YaÄŸÄ±ÅŸdan sonra torpaq", "TÉ™zÉ™ Ã§Ã¶rÉ™k", "DÉ™niz", "Kofe", "GÃ¼l"], emoji: "ðŸŒ¹" },
      { q: "Æn Ã§ox sevdiyi rÉ™qs nÃ¶vÃ¼ hansÄ±dÄ±r?", options: ["Latin", "Hip-hop", "Vals", "RÉ™qs etmir", "Folklor", "Tango"], emoji: "ðŸ’ƒ" },
      { q: "Æn sevdiyi rÉ™ng kombinasiyasÄ± hansÄ±dÄ±r?", options: ["Qara-aÄŸ", "QÄ±rmÄ±zÄ±-qara", "Mavi-aÄŸ", "YaÅŸÄ±l-qÉ™hvÉ™yi", "Ã‡É™hrayÄ±-boz", "DigÉ™r"], emoji: "ðŸŒˆ" },
      { q: "UÅŸaqlÄ±qda É™n Ã§ox sevdiyi ÅŸirniyyat nÉ™ idi?", options: ["Åžokolad", "Konfet", "Tort", "Dondurma", "PiÅŸmiÅŸ xÉ™mir", "Qoz-fÄ±ndÄ±q"], emoji: "ðŸ«" },
      { q: "Æn Ã§ox sevdiyi idman nÃ¶vÃ¼nÃ¼ izlÉ™mÉ™yi sevir?", options: ["Futbol", "Basketbol", "Tennis", "Formula 1", "Boks", "HeÃ§ izlÉ™mir"], emoji: "ðŸ€" },
      { q: "Æn sevdiyi bayram hansÄ±dÄ±r?", options: ["Yeni il", "Novruz", "Ad gÃ¼nÃ¼", "SevgililÉ™r gÃ¼nÃ¼", "Qurban bayramÄ±", "MÃ¼stÉ™qillik gÃ¼nÃ¼"], emoji: "ðŸŽ‰" },
      { q: "Æn Ã§ox sevdiyi hava ÅŸÉ™raiti necÉ™dir?", options: ["GÃ¼nÉ™ÅŸli", "YaÄŸÄ±ÅŸlÄ±", "QarlÄ±", "SÉ™rin kÃ¼lÉ™kli", "Ä°sti yay gÃ¼nÃ¼", "PayÄ±z yarpaqlarÄ±"], emoji: "â›…" },
      { q: "Æn sevdiyi sosial ÅŸÉ™bÉ™kÉ™ hansÄ±dÄ±r?", options: ["Instagram", "TikTok", "Telegram", "Facebook", "Twitter/X", "HeÃ§ istifadÉ™ etmir"], emoji: "ðŸ“±" }
    ];

    // PeerJS multiplayer funksiyalarÄ± (createHost, joinGame, handleData) É™vvÉ™lki kimi qalÄ±r
    // ... (burada É™vvÉ™lki multiplayer kodunu saxla, yer tutmasÄ±n deyÉ™ qÄ±saldÄ±ram)

    // Davam et dÃ¼ymÉ™si
    startBtn.addEventListener('click', () => {
      startBtn.style.display = 'none';
      timerEl.style.display = 'block';
      qEmoji.style.display = 'block';
      questionEl.style.display = 'block';
      optionsEl.style.display = 'grid';
      timerEl.style.opacity = '1';
      qEmoji.style.opacity = '1';
      questionEl.style.opacity = '1';
      optionsEl.style.opacity = '1';

      video.muted = false;  // SÉ™si aÃ§
      video.play().catch(() => {});  // autoplay error qarÅŸÄ±sÄ±nÄ± almaq Ã¼Ã§Ã¼n
      nextQuestion();       // Ä°lk sualÄ± baÅŸla
    });

    // Oyun ekranÄ± aÃ§Ä±lÄ±nca "Davam et" dÃ¼ymÉ™si avtomatik gÃ¶rÃ¼nÃ¼r
    // (lobby baÄŸlandÄ±qdan sonra gameDiv.style.display = 'flex' olanda)
  </script>
</body>
</html>