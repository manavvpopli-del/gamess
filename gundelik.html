<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sevgilini Nə Qədər Tanıyırsan?</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      color: #f0e0ff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      overflow-x: hidden;
    }
    #bg-video {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: -2;
    }
    #overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      z-index: -1;
    }
    h1 { 
      font-size: clamp(2.2rem, 7vw, 3.5rem); 
      margin: 4vh 0 3vh; 
      color: #ff66cc; 
      text-shadow: 0 0 15px #ff66cc80; 
      z-index: 1;
    }
    #status {
      font-size: clamp(1.4rem, 5vw, 2rem);
      margin: 3vh 0 5vh;
      color: #ffcc66;
      text-align: center;
      max-width: 90%;
      z-index: 1;
    }
    #lobby { 
      text-align: center; 
      width: 100%; 
      max-width: 520px; 
      z-index: 1; 
      display: none;
    }
    input, button {
      font-size: 1.4rem;
      padding: 1rem 2rem;
      margin: 1.2rem 0.6rem;
      border: none;
      border-radius: 14px;
      width: 100%;
      max-width: 400px;
    }
    button {
      background: #ff33cc;
      color: white;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover { background: #ff1ab3; transform: translateY(-4px); }
    #copyBtn { background: #00cc88; }
    #copyBtn:hover { background: #00ffaa; }

    #game {
      display: none;
      width: 100%;
      max-width: 1100px;
      flex-direction: column;
      align-items: center;
      padding: 3vh 0;
      z-index: 1;
    }
    #start-btn {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
      padding: 1rem 3rem;
      background: #00cc88;
      color: white;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(0,204,136,0.5);
      transition: all 0.3s;
      z-index: 100;
    }
    #start-btn:hover {
      background: #00ffaa;
      transform: translate(-50%, -50%) scale(1.08);
    }
    #timer, #qEmoji, #question, .options {
      display: none;
    }
    #end {
      display: none;
      width: 100%;
      max-width: 1000px;
      flex-direction: column;
      align-items: center;
      padding: 5vh 0;
      z-index: 1;
    }
    #end h2 { font-size: clamp(3rem, 8vw, 4.2rem); color: #ffdd44; margin-bottom: 4vh; }
    #result { font-size: clamp(1.8rem, 5.5vw, 2.4rem); text-align: center; margin-bottom: 5vh; }
    #answersList {
      width: 100%;
      background: rgba(40,0,70,0.75);
      border-radius: 18px;
      padding: 4vh;
      font-size: clamp(1.2rem, 4vw, 1.5rem);
      line-height: 1.8;
      margin-bottom: 5vh;
    }
    #answersList div { margin: 2.5vh 0; padding: 2.5vh; background: rgba(60,0,100,0.65); border-radius: 14px; }
    button#downloadPdf, button#restartBtn {
      font-size: 1.5rem;
      padding: 1.2rem 3rem;
      margin: 2vh;
    }
    #downloadPdf { background: #3366ff; }
    #downloadPdf:hover { background: #5588ff; }
    #waiting { font-size: 1.5rem; color: #ffcc66; margin-top: 3vh; text-align: center; }

    /* Sağ alt küncdəki cihaz məlumatı qutusu */
    #device-info {
      position: fixed;
      bottom: 15px;
      right: 15px;
      background: rgba(0,0,0,0.7);
      color: #aaa;
      padding: 10px 15px;
      border-radius: 10px;
      font-size: 0.85rem;
      z-index: 999;
      max-width: 280px;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255,255,255,0.1);
    }
  </style>
</head>
<body>

  <video id="bg-video" autoplay loop playsinline muted>
    <source src="videoo.mp4" type="video/mp4">
  </video>
  <div id="overlay"></div>

  <audio id="bg-music" loop>
    <source src="musiic.mp3" type="audio/mpeg">
  </audio>

  <h1>Sevgilini Nə Qədər Tanıyırsan?</h1>
  <div id="status">Oyuna başlamaq üçün "Davam et" düyməsinə bas</div>

  <button id="start-btn">Davam et</button>

  <div id="lobby">
    <button onclick="createHost()">Host ol (ID yarat)</button>
    <input id="peerIdInput" placeholder="Dostunun ID-sini yaz" />
    <button onclick="joinGame()">Qoşul</button>
  </div>

  <div id="game">
    <div id="timer">15</div>
    <div id="qEmoji"></div>
    <div id="question"></div>
    <div class="options" id="options"></div>
  </div>

  <div id="end">
    <h2>Oyun Bitdi!</h2>
    <div id="result">30 sual cavablandı!</div>
    <div id="answersList"></div>
    <button id="downloadPdf">PDF olaraq yüklə</button>
    <button id="restartBtn" onclick="requestRestart()">Yenidən Başlat</button>
    <div id="waiting"></div>
  </div>

  <!-- Sağ alt küncdə cihaz məlumatı -->
  <div id="device-info">
    Model: <span id="device-model">Yüklənir...</span><br>
    IP: <span id="ip-address">Yüklənir...</span><br>
    MAC: <span id="mac-address">Brauzerdə mövcud deyil (təhlükəsizlik)</span>
  </div>

  <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    // Cihaz məlumatlarını yüklə
    document.addEventListener('DOMContentLoaded', () => {
      // Model (User-Agent-dan)
      const ua = navigator.userAgent;
      let model = "Bilinmir";
      if (/iPhone|iPad|iPod/.test(ua)) {
        model = ua.match(/\((.*?)\)/)?.[1] || "iOS cihaz";
      } else if (/Android/.test(ua)) {
        model = ua.match(/Android.*?; (.*?) Build/)?.[1] || "Android cihaz";
      } else if (/Windows/.test(ua)) {
        model = "Windows PC";
      } else if (/Mac/.test(ua)) {
        model = "Macintosh";
      }
      document.getElementById('device-model').textContent = model;

      // IP (public-ip servisi ilə)
      fetch('https://api.ipify.org?format=json')
        .then(res => res.json())
        .then(data => {
          document.getElementById('ip-address').textContent = data.ip || "Gizli";
        })
        .catch(() => {
          document.getElementById('ip-address').textContent = "Alınmadı";
        });
    });

    // qalan kod (multiplayer, oyun logikası, start-btn, music və s.) tamamilə əvvəlki kimi qalır
    // ... (buraya əvvəlki script hissəsini yapışdır, yer tutmasın deyə burda qısaldıram)

    // "Davam et" düyməsi
    startBtn.addEventListener('click', () => {
      startBtn.style.display = 'none';
      music.play().catch(e => console.log("Mahnı oxumadı:", e));
      lobby.style.display = 'block';
      status.innerHTML = 'Host ol və ya dostunun ID-sini yazaraq qoşul!';
    });

    status.innerHTML = 'Oyuna başlamaq üçün "Davam et" düyməsinə bas';
  </script>
</body>
</html>